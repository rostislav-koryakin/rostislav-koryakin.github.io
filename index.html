<!DOCTYPE html>
<html>
<head>
    <title>Вибрация</title>
    <!-- Подключаем скрипт Telegram Web App -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>Привет! Нажми на кнопку.</h1>
    <div id="button-container" style="display: flex; flex-direction: column; gap: 10px; padding: 10px;">
        <!-- Кнопки будут созданы здесь с помощью JS -->
    </div>

    <script>
        // Убедимся, что код выполняется после загрузки страницы
        document.addEventListener('DOMContentLoaded', function() {
            const tg = window.Telegram.WebApp;
            const container = document.getElementById('button-container');

            // Проверяем, что мы находимся внутри Telegram Mini App
            if (tg && tg.HapticFeedback) {
                const createButton = (text, onClick) => {
                    const btn = document.createElement('button');
                    btn.innerText = text;
                    btn.style.width = '100%';
                    btn.style.padding = '10px';
                    btn.addEventListener('click', onClick);
                    container.appendChild(btn);
                };

                // Кнопки для impactOccurred
                ['light', 'medium', 'heavy', 'rigid', 'soft'].forEach(type => {
                    createButton(`Impact: ${type}`, () => {
                        tg.HapticFeedback.impactOccurred(type);
                    });
                });

                // Кнопки для notificationOccurred
                ['success', 'warning', 'error'].forEach(type => {
                    createButton(`Notification: ${type}`, () => {
                        tg.HapticFeedback.notificationOccurred(type);
                    });
                });

                // Кнопка для selectionChanged
                createButton('Selection Changed', () => {
                    tg.HapticFeedback.selectionChanged();
                });

            } else {
                // Если приложение открыто не в Telegram, сообщим об этом
                container.innerHTML = '<p>Эта функция работает только внутри Telegram Mini App.</p>';
            }

            // Добавляем информационный блок с инструкциями
            const infoDiv = document.createElement('div');
            infoDiv.style.marginTop = '20px';
            infoDiv.style.padding = '10px';
            infoDiv.style.fontSize = '14px';
            infoDiv.style.color = 'var(--tg-theme-hint-color, #999999)'; // Используем цвет подсказок из темы Telegram
            infoDiv.innerHTML = '<b>Не все кнопки вибрируют?</b><br>Это нормально для Android. Чтобы включить все типы вибрации, попробуйте:<br>1. Отключить режим энергосбережения.<br>2. Включить "Тактильный отклик" или "Виброотклик" в системных настройках звука.';
            document.body.appendChild(infoDiv);
        });
    </script>
</body>
</html>